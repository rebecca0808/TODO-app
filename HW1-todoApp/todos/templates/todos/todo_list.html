{% extends 'todos/base.html' %}

{% block title %}TODO List{% endblock %}

{% block content %}
<style>
    .filter-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .filter-buttons {
        display: flex;
        gap: 10px;
    }
    
    .stats {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }
    
    .stat-card {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        padding: 15px 25px;
        border-radius: 10px;
        color: white;
        min-width: 120px;
        text-align: center;
    }
    
    .stat-card:nth-child(2) {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }
    
    .stat-card:nth-child(3) {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
    }
    
    .stat-card h3 {
        font-size: 2em;
        margin-bottom: 5px;
    }
    
    .stat-card p {
        font-size: 0.9em;
        opacity: 0.9;
    }
    
    .todo-list {
        list-style: none;
    }
    
    .todo-item {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s ease;
        border-left: 5px solid #667eea;
    }
    
    .todo-item:hover {
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .todo-item.completed {
        opacity: 0.7;
        border-left-color: #28a745;
    }
    
    .todo-item.completed .todo-title {
        text-decoration: line-through;
        color: #6c757d;
    }
    
    .todo-info {
        flex: 1;
    }
    
    .todo-title {
        font-size: 1.2em;
        font-weight: 600;
        margin-bottom: 8px;
        color: #333;
    }
    
    .todo-meta {
        display: flex;
        gap: 15px;
        font-size: 0.9em;
        color: #666;
    }
    
    .due-date {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .due-date.overdue {
        color: #dc3545;
        font-weight: 600;
    }
    
    .status-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.85em;
        font-weight: 600;
    }
    
    .status-badge.completed {
        background: #d4edda;
        color: #155724;
    }
    
    .status-badge.pending {
        background: #fff3cd;
        color: #856404;
    }
    
    .todo-actions {
        display: flex;
        gap: 8px;
        align-items: center;
    }
    
    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #999;
    }
    
    .empty-state svg {
        width: 100px;
        height: 100px;
        margin-bottom: 20px;
    }
    
    .empty-state h3 {
        font-size: 1.5em;
        margin-bottom: 10px;
        color: #666;
    }
</style>

<div class="filter-bar">
    <h2>My TODOs</h2>
    <a href="{% url 'todo_create' %}" class="btn btn-primary">‚ûï Add New TODO</a>
</div>

<div class="stats">
    <div class="stat-card">
        <h3>{{ total_count }}</h3>
        <p>Total TODOs</p>
    </div>
    <div class="stat-card">
        <h3>{{ pending_count }}</h3>
        <p>Pending</p>
    </div>
    <div class="stat-card">
        <h3>{{ completed_count }}</h3>
        <p>Completed</p>
    </div>
</div>

<div class="filter-buttons">
    <a href="?status=all" class="btn {% if status_filter == 'all' %}btn-primary{% else %}btn-secondary{% endif %} btn-sm">All</a>
    <a href="?status=pending" class="btn {% if status_filter == 'pending' %}btn-primary{% else %}btn-secondary{% endif %} btn-sm">Pending</a>
    <a href="?status=completed" class="btn {% if status_filter == 'completed' %}btn-primary{% else %}btn-secondary{% endif %} btn-sm">Completed</a>
</div>

{% if todos %}
<ul class="todo-list">
    {% for todo in todos %}
    <li class="todo-item {% if todo.is_completed %}completed{% endif %}">
        <div class="todo-info">
            <div class="todo-title">{{ todo.title }}</div>
            <div class="todo-meta">
                {% if todo.due_date %}
                <span class="due-date {% if todo.due_date < today and not todo.is_completed %}overdue{% endif %}">
                    üìÖ Due: {{ todo.due_date|date:"M d, Y" }}
                </span>
                {% endif %}
                <span class="status-badge {% if todo.is_completed %}completed{% else %}pending{% endif %}">
                    {% if todo.is_completed %}‚úì Completed{% else %}‚è≥ Pending{% endif %}
                </span>
            </div>
        </div>
        <div class="todo-actions">
            <a href="{% url 'todo_toggle' todo.pk %}" class="btn {% if todo.is_completed %}btn-warning{% else %}btn-success{% endif %} btn-sm">
                {% if todo.is_completed %}‚Ü©Ô∏è Undo{% else %}‚úì Complete{% endif %}
            </a>
            <a href="{% url 'todo_update' todo.pk %}" class="btn btn-warning btn-sm">‚úèÔ∏è Edit</a>
            <a href="{% url 'todo_delete' todo.pk %}" class="btn btn-danger btn-sm">üóëÔ∏è Delete</a>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
<div class="empty-state">
    <div style="font-size: 80px;">üìã</div>
    <h3>No TODOs found</h3>
    <p>
        {% if status_filter == 'completed' %}
        You haven't completed any todos yet.
        {% elif status_filter == 'pending' %}
        Great! You have no pending todos.
        {% else %}
        Start by creating your first TODO!
        {% endif %}
    </p>
    <a href="{% url 'todo_create' %}" class="btn btn-primary" style="margin-top: 20px;">Create Your First TODO</a>
</div>
{% endif %}
{% endblock %}
